{"ast":null,"code":"var _jsxFileName = \"/Users/srcho/development/nuri/frontend/src/components/GPTSummary.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Typography, Paper, Box, Tooltip } from '@mui/material';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction GPTSummary({\n  summary,\n  sources = []\n}) {\n  _s();\n  const [processedSummary, setProcessedSummary] = useState('');\n  const [footnotes, setFootnotes] = useState([]);\n  useEffect(() => {\n    if (summary) {\n      const processedText = summary.replace(/\\[(\\d+)\\]/g, (match, p1) => {\n        const index = parseInt(p1, 10) - 1;\n        if (index >= 0 && index < sources.length) {\n          return `[${p1}]`;\n        }\n        return match;\n      });\n      setProcessedSummary(processedText);\n    }\n    if (Array.isArray(sources)) {\n      setFootnotes(sources.map((source, index) => ({\n        id: index + 1,\n        title: source.title || \"제목 없음\",\n        authors: source.authors || \"저자 정보 없음\",\n        url: source.url || \"\"\n      })));\n    }\n  }, [summary, sources]);\n  if (!summary) {\n    return /*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 3,\n      sx: {\n        p: 2,\n        borderRadius: '16px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        gutterBottom: true,\n        sx: {\n          color: 'primary.main'\n        },\n        children: \"DBpia AI\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Typography, {\n        children: \"\\uB2F5\\uBCC0\\uC744 \\uBD88\\uB7EC\\uC624\\uB294 \\uC911 \\uC624\\uB958\\uAC00 \\uBC1C\\uC0DD\\uD588\\uC2B5\\uB2C8\\uB2E4.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Paper, {\n    elevation: 3,\n    sx: {\n      p: 2,\n      borderRadius: '16px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h6\",\n      gutterBottom: true,\n      sx: {\n        color: 'primary.main'\n      },\n      children: \"DBpia AI\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Typography, {\n      children: processedSummary.split(/(\\[\\d+\\])/).map((part, index) => {\n        if (part.match(/\\[(\\d+)\\]/)) {\n          const footnoteId = parseInt(part.match(/\\[(\\d+)\\]/)[1], 10);\n          const footnote = footnotes.find(f => f.id === footnoteId);\n          return footnote ? /*#__PURE__*/_jsxDEV(Tooltip, {\n            title: `${footnote.title} - ${footnote.authors}`,\n            arrow: true,\n            children: /*#__PURE__*/_jsxDEV(\"sup\", {\n              style: {\n                cursor: 'pointer',\n                color: 'blue'\n              },\n              children: part\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 17\n            }, this)\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 15\n          }, this) : part;\n        }\n        return part;\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), footnotes.length > 0 && /*#__PURE__*/_jsxDEV(Box, {\n      mt: 2,\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        gutterBottom: true,\n        sx: {\n          color: 'primary.main'\n        },\n        children: \"\\uCC38\\uACE0 \\uBB38\\uD5CC\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this), footnotes.map(footnote => /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"body2\",\n        paragraph: true,\n        children: [\"[\", footnote.id, \"] \", footnote.title, \" - \", footnote.authors, footnote.url && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [\" (\", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: footnote.url,\n            target: \"_blank\",\n            rel: \"noopener noreferrer\",\n            children: \"\\uB9C1\\uD06C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 21\n          }, this), \")\"]\n        }, void 0, true)]\n      }, footnote.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n_s(GPTSummary, \"0GznQ6GIxAk9evZXyzYDCOYTz5I=\");\n_c = GPTSummary;\nexport default GPTSummary;\nvar _c;\n$RefreshReg$(_c, \"GPTSummary\");","map":{"version":3,"names":["React","useState","useEffect","Typography","Paper","Box","Tooltip","jsxDEV","_jsxDEV","Fragment","_Fragment","GPTSummary","summary","sources","_s","processedSummary","setProcessedSummary","footnotes","setFootnotes","processedText","replace","match","p1","index","parseInt","length","Array","isArray","map","source","id","title","authors","url","elevation","sx","p","borderRadius","children","variant","gutterBottom","color","fileName","_jsxFileName","lineNumber","columnNumber","split","part","footnoteId","footnote","find","f","arrow","style","cursor","mt","paragraph","href","target","rel","_c","$RefreshReg$"],"sources":["/Users/srcho/development/nuri/frontend/src/components/GPTSummary.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Typography, Paper, Box, Tooltip } from '@mui/material';\n\nfunction GPTSummary({ summary, sources = [] }) {\n  const [processedSummary, setProcessedSummary] = useState('');\n  const [footnotes, setFootnotes] = useState([]);\n\n  useEffect(() => {\n    if (summary) {\n      const processedText = summary.replace(/\\[(\\d+)\\]/g, (match, p1) => {\n        const index = parseInt(p1, 10) - 1;\n        if (index >= 0 && index < sources.length) {\n          return `[${p1}]`;\n        }\n        return match;\n      });\n\n      setProcessedSummary(processedText);\n    }\n\n    if (Array.isArray(sources)) {\n      setFootnotes(sources.map((source, index) => ({\n        id: index + 1,\n        title: source.title || \"제목 없음\",\n        authors: source.authors || \"저자 정보 없음\",\n        url: source.url || \"\"\n      })));\n    }\n  }, [summary, sources]);\n\n  if (!summary) {\n    return (\n      <Paper elevation={3} sx={{ p: 2, borderRadius: '16px' }}>\n        <Typography variant=\"h6\" gutterBottom sx={{ color: 'primary.main' }}>DBpia AI</Typography>\n        <Typography>답변을 불러오는 중 오류가 발생했습니다.</Typography>\n      </Paper>\n    );\n  }\n\n  return (\n    <Paper elevation={3} sx={{ p: 2, borderRadius: '16px' }}>\n      <Typography variant=\"h6\" gutterBottom sx={{ color: 'primary.main' }}>DBpia AI</Typography>\n      <Typography>\n        {processedSummary.split(/(\\[\\d+\\])/).map((part, index) => {\n          if (part.match(/\\[(\\d+)\\]/)) {\n            const footnoteId = parseInt(part.match(/\\[(\\d+)\\]/)[1], 10);\n            const footnote = footnotes.find(f => f.id === footnoteId);\n            return footnote ? (\n              <Tooltip key={index} title={`${footnote.title} - ${footnote.authors}`} arrow>\n                <sup style={{ cursor: 'pointer', color: 'blue' }}>{part}</sup>\n              </Tooltip>\n            ) : part;\n          }\n          return part;\n        })}\n      </Typography>\n      {footnotes.length > 0 && (\n        <Box mt={2}>\n          <Typography variant=\"h6\" gutterBottom sx={{ color: 'primary.main' }}>참고 문헌</Typography>\n          {footnotes.map((footnote) => (\n            <Typography key={footnote.id} variant=\"body2\" paragraph>\n              [{footnote.id}] {footnote.title} - {footnote.authors}\n              {footnote.url && (\n                <> (<a href={footnote.url} target=\"_blank\" rel=\"noopener noreferrer\">링크</a>)</>\n              )}\n            </Typography>\n          ))}\n        </Box>\n      )}\n    </Paper>\n  );\n}\n\nexport default GPTSummary;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}